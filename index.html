<!doctype html>
<html lang = "en">
   <head>
      <meta charset = "utf-8">
      <title>jQuery Code Player</title>
	  <link rel="stylesheet" type="text/css" href="style.css">
      <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
      <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
      <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/mode/htmlmixed/htmlmixed.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/mode/css/css.min.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/theme/dracula.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/mode/javascript/javascript.min.js"></script>
	</head>
	<body>
        <script>
            $(function() {
                var htmlEditor = CodeMirror.fromTextArea(document.getElementById("rb-html-panel"), {
                    mode: "htmlmixed", // Set the initial mode (e.g., HTML)
                    lineNumbers: true, // Enable line numbers (optional)
                    theme: "dracula", 
                    
                });
    
                var cssEditor = CodeMirror.fromTextArea(document.getElementById("rb-css-panel"), {
                    mode: "css", // Set the initial mode (e.g., HTML)
                    lineNumbers: true, // Enable line numbers (optional)
                    theme: "dracula", // Choose a theme (optional)
                });
                var javascriptEditor = CodeMirror.fromTextArea(document.getElementById("rb-javascript-panel"), {
                    mode: "javascript", // Set the initial mode (e.g., HTML)
                    lineNumbers: true, // Enable line numbers (optional)
                    theme: "dracula", // Choose a theme (optional)
                });
    
                // Function to update the output on output panel
                function updateOutput() {
                    $("iframe").contents().find("html").html("<html><head><style type='text/css'>" + cssEditor.getValue() + "</style></head><body>" + htmlEditor.getValue() + "</body></html>");
                    document.getElementById("rb-output-panel").contentWindow.eval(javascriptEditor.getValue());
                }
                
                // updating output
                updateOutput();
                
                // on entering any letter in html or css or js it calls updateoutput() 
                $("textarea").on('change keyup paste', function() {
                    updateOutput();
                });
                
            });       
        </script>
            
            <!-- Panels for the rb-code-editor-btn-grps on the Header Above -->
        <div class="rb-row-flex rb-col-100">
            <div class="rb-col-49 rb-code-lang-block rb-ht-vh-100">
                <div>
                    <p class="rb-bg-dark rb-text-orange rb-col-100 rb-text-center rb-mr-bot-0 rb-mr-top-0 rb-text-bold rb-pad-5-0">HTML</p>
                    <textarea id="rb-html-panel" class="rb-code-editor-panel"><div id="demo">Hello World!</div></textarea>
                </div>
                <div>
                    <p class="rb-bg-dark rb-text-orange rb-col-100 rb-text-center rb-mr-bot-0 rb-mr-top-0 rb-text-bold rb-pad-5-0">CSS</p>
                    <textarea id="rb-css-panel" class="rb-code-editor-panel">html {background: #343a40;}
    div { color: red; }
                    </textarea>
                </div>
                <div>
                    <p class="rb-bg-dark rb-text-orange rb-col-100 rb-text-center rb-mr-bot-0 rb-mr-top-0 rb-text-bold rb-pad-5-0">JavaScript</p>
                    <textarea id="rb-javascript-panel" class="rb-code-editor-panel">document.getElementById("demo").innerHTML = "wellcome!";</textarea>
                </div>
            </div>
            <div class="rb-col-49 rb-ht-vh-100">
                <iframe id="rb-output-panel" class="rb-ht-vh-100 rb-col-100" style="border: none;"></iframe>
            </div>
        </div>
	
	</body>
</html>	